<!DOCTYPE html>

<!-- to ui gia refister tou xrhsth -->

<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/public/css/register_styles.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


</head>

<body>

    <form action="/register" method="post">
        <div class="container">
            <h1>Register</h1>
            <p>Please fill in this form to create an account.</p>
            <hr>

            <label for="email"><b>Email</b></label>
            <input type="text" placeholder="Enter Email" name="email" id="email" required>

            <label for="username"><b>Username</b></label>
            <input type="text" placeholder="Enter Username" name="username" id="username" required>

            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="password" id="psw"
                pattern="(?=.*\d)(?=.*[A-Z])(?=.*[!@#$%^&*()_+\-=\[\]{};':\\|,.<>\/?]).{8,}"
                title="Must contain at least one number, one uppercase letter,a symbol(eg #$*&@) and at least 8 or more characters"
                required>

            <label for="psw-repeat"><b>Repeat Password</b></label>
            <input type="password" placeholder="Repeat Password" name="psw_repeat" id="psw-repeat" required>
            <hr>

            <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
            <button type="submit" onclick="register" action="/endpoint" method="POST" class="registerbtn">Register</button>
        </div>

        <div class="container signin">
            <p>Already have an account? <a href="http://localhost:8080/">Sign in</a>.</p>
        </div>


    </form>

    <div id="message">
        <h3>Password must contain the following:</h3>
        <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
        <p id="number" class="invalid">A <b>number</b></p>
        <p id="length" class="invalid">Minimum <b>8 characters</b></p>
        <p id="symbols" class="invalid">A <b>symbols </b></p>
    </div>

</body>

<script>
    
    let passwordElement = document.getElementById("psw");
    let passwordRepeat = document.getElementById("psw-repeat")
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");
    var symbols = document.getElementById("symbols");


    


    // When the user clicks on the password field, show the message box
    passwordElement.onfocus = function() {
        document.getElementById("message").style.display = "block";
    }
    
    // When the user clicks outside of the password field, hide the message box
    passwordElement.onblur = function() {
        document.getElementById("message").style.display = "none";
        }
    // When the user starts to type something inside the password field
    passwordElement.onkeyup = function() {
        // Validate capital letters
        var upperCaseLetters = /[A-Z]/g;
        if(passwordElement.value.match(upperCaseLetters)) {
            capital.classList.remove("invalid");
            capital.classList.add("valid");
        } 
        else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
        }
            
        // Validate numbers
        var numbers = /[0-9]/g;
        if(passwordElement.value.match(numbers)) {
            number.classList.remove("invalid");
            number.classList.add("valid");
        }   
        else {
            number.classList.remove("valid");
            number.classList.add("invalid");
        }

        // Validate length
        if(passwordElement.value.length >= 8) {
            length.classList.remove("invalid");
            length.classList.add("valid");
        } 
        else {
            length.classList.remove("valid");
            length.classList.add("invalid");
        }
        
        // For symbols (non-word characters)

        var symbols = /[!@#$%^&*()_+\-=\[\]{};':\\|,.<>\/?]/;   
        if(passwordElement.value.match(symbols)) {
            symbols.classList.remove("invalid");
            symbols.classList.add("valid");
        }
        else {
            symbols.classList.remove("valid");
            symbols.classList.add("invalid");
        }    
    }

async function register() { 
    //elegxos password

    if (passwordElement != passwordRepeat) {
        alert("Passwords do not match.");
        return false;
    }
    else 
    {
        return true;
    }
            

}    

</script>



</html>
